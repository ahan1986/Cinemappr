<html>

<head>

</head>

<body>

    <h1>Hello! Let's parse movies!</h1>

    <script>

        var fake_theater_data = [
            {
                "theater": "University Penn 6",
                "showtime": "1:20 PM",
                "title": "Black Panther"
            },
            {
                "theater": "University Penn 6",
                "showtime": "3:50 PM",
                "title": "Black Panther"
            },
            {
                "theater": "University Penn 6",
                "showtime": "4:40 PM",
                "title": "Black Panther"
            },
            {
                "theater": "University Penn 6",
                "showtime": "8:00 PM",
                "title": "Black Panther"
            },
            {
                "theater": "University Penn 6",
                "showtime": "10:15 AM",
                "title": "Tomb Raider"
            },
            {
                "theater": "University Penn 6",
                "showtime": "4:05 PM",
                "title": "Tomb Raider"
            },
            {
                "theater": "PFS Roxy Theater",
                "showtime": "3:15 PM",
                "title": "Black Panther"
            },
            {
                "theater": "PFS Roxy Theater",
                "showtime": "6:45 PM",
                "title": "Black Panther"
            },
            {
                "theater": "PFS Roxy Theater",
                "showtime": "9:30 PM",
                "title": "Black Panther"
            },
            {
                "theater": "AMC N Broadstreet 7",
                "showtime": "1:20 PM",
                "title": "A Wrinkle in Time"
            },
            {
                "theater": "AMC N Broadstreet 7",
                "showtime": "1:20 PM",
                "title": "A Wrinkle in Time"
            }];


        parse_data("University Penn 6", fake_theater_data)



        function parse_data(my_theater_name, theaterData) {
            console.log("Junk we start with:");
            console.log(theaterData);

            // Step 1: Build array of just movies/times at this theater
            var array_of_objects_at_my_theater = [];

            for (let i = 0; i < theaterData.length; i++) {
                if (theaterData[i]["theater"] === my_theater_name) {
                    array_of_objects_at_my_theater.push(theaterData[i]);
                }
            }
            console.log("Step 1: Build array of just movies/times at this theater");
            console.log(array_of_objects_at_my_theater);

            // Step 2: Build a list of movie names
            var array_of_movie_names = [];
            for (let i = 0; i < array_of_objects_at_my_theater.length; i++) {
                if (array_of_movie_names.indexOf(array_of_objects_at_my_theater[i].title) < 0 ) {
                    array_of_movie_names.push(array_of_objects_at_my_theater[i].title);

                }
            }

            console.log("Step 2: Build a list of movie names");
            console.log(array_of_movie_names);

            // Step 3: Create an array of objects for each movie playing at this theatre 
            var array_of_movies_at_this_theater_with_show_times = [];

            for (let i = 0; i < array_of_movie_names.length; i++ ) {
                var new_movie_object = {};
                new_movie_object.title = array_of_movie_names[i];
                new_movie_object.showtimes = [];
                array_of_movies_at_this_theater_with_show_times.push(new_movie_object);
            }

            console.log("Step 3: Create an array of objects for each movie playing at this theatre");
            console.log(array_of_movies_at_this_theater_with_show_times);

            // Step 4: Populate showtimes into that data structure 
            for (let i = 0; i < array_of_objects_at_my_theater.length; i++) {
                // figure out which movie object to put the time in
                for (let j = 0; j < array_of_movies_at_this_theater_with_show_times.length; j++){
                    if (array_of_objects_at_my_theater[i].title === array_of_movies_at_this_theater_with_show_times[j].title) {
                        array_of_movies_at_this_theater_with_show_times[j].showtimes.push(array_of_objects_at_my_theater[i].showtime);
                    }
                }
            }

            console.log("Step 4: Populate showtimes into that data structure ");
            console.log(array_of_movies_at_this_theater_with_show_times);

            // Step 5: Pack it into its own object why not
            var final_theater_object = {};
            final_theater_object.name = my_theater_name;
            final_theater_object.movies_with_times = array_of_movies_at_this_theater_with_show_times;

            console.log("Step 5: Pack it into its own object why not");
            console.log(final_theater_object);



        }

    </script>

</body>

</html>